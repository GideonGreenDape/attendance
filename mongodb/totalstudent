const { MongoClient } = require('mongodb');
require('dotenv').config();

const url = process.env.CONNECTION_URI;
const dbName = 'MvcCohort';
const signupDoc = 'signup';

async function TotalStudents() {
    let client;
    try {
        client = new MongoClient(url);
        await client.connect();
        console.log('Connected to MongoDB for fetching total students');

        const db = client.db(dbName);

       
        const totalStudents = await db.collection(signupDoc).countDocuments();
        return totalStudents;

    } catch (error) {
        console.error('Error fetching total students:', error);
        throw error;
    } finally {
        if (client) {
            await client.close();
            console.log('Closed MongoDB connection');
        }
    }
}

module.exports = { TotalStudents };
